# Chapter15 

## 컨트롤러의 역할
- 클라이언트가 요구한 기능을 실행
- 응답 결과를 생성하는데 필요한 모델 생성
  - 기능 재공을 위한 로직을 직접 수행하지 않고 해당 로직을 제공하는 서비스에 처리를 위임한다.
- 응답 결과를 생성할 뷰를 선택

## 컨트롤러에서의 DAO 접근
목록이나 상세 화면과 같이 데이터를 조회하는 기능만 있고 부가적인 로직이 없는 경우 직접 DAO를 사용하기도 한다.
- 중간 계층 없이 바로 통신하는 것..과연 좋을까??
- 책에서는 단순히 DAO의 메서드를 호출해 결과를 반환하는 경우, DAO를 접근해도 큰 틀에서는 웹의 계층 구조가 유지된다고 본다고 하였다.

## 서비스의 역할
- DB에서 데이터를 구한다.
  - 존재하지 않으면 예외를 발생시킨다.
- 비즈니스 로직을 실행한다.
- DB에 변경값을 반영한다.

> 서비스 로직 수행 과정에서 오류가 발생할 수 있기에 서비스 메서드들은 Transaction범위에서 실행을 시킨다.

### 로직들의 분리?
같은 데이터를 사용하는 기능들은 한 개의 서비스에 모아서 구현할 수 있다. 
이와 같이 기능별로 서비스 클래스를 작성하는 것이 유지관리, 확장 측면에서 좋다.

### 서비스의 결과 반환
서비스는 결과를 크게 두 가지 방식으로 알려준다.
1. 리턴 값을 이용한 정상 결과
2. Exception을 이용한 비정상 결과

## 패키지 분리
- 패키지 분리는 정답이 따로 없고 팀 구성원 모두가 동일한 규칙에 따라 구성하기만 하면 된다.
- 컨트롤러-서비스-DAO 구조는 간단한 웹에서는 문제가 없지만 로직이 복잡해지면 해당 구조도 복잡해질 수 있다.
  - 이러한 경우 기능 분석에 시간이 오래 걸리고 비즈니스 로직들이 흩어지기도 한다.
  - 웹 애플리케이션이 복잡해지며 발생하는 문제를 완화하는 방법 중 하나는 도메인 주도 설게이다.
    - 해당 구조는 UI(Controller)-서비스-도메인-인프라(DAO) 영역으로 구성하는 것이다.
    - 중요한 점은 비즈니스 로직들이 서비스가 아닌 도메인에 위치한다는 것이다.
    - 도메인은 정해진 패턴에 따라 모델을 구현할 수 있다.
